{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SACA,MAAMC,OAAEC,GAAWC,EAAAJ,GACnB,IAAIK,EAAS,EACTC,EAAW,EACXC,EAAY,EACZC,EAAQ,EACRC,EAAM,IACNC,EAAc,EACdC,EAAe,EACnB,MAAMC,EAAO,CACXC,SAAUC,SAASC,cAAc,SACjCC,WAAYF,SAASC,cAAc,uBACnCE,UAAWH,SAASC,cAAc,sBAClCG,YAAaJ,SAASC,cAAc,yBAGhCI,EAAW,EAAGC,SAAAC,EAAQC,MAAEA,MAC5BnB,EAAOoB,QAAQ,uBAAqBF,QAAiBC,MAAU,EAE3DE,EAAU,EAAGJ,SAAAK,EAAQH,MAAEA,MAC3BnB,EAAOuB,QAAQ,sBAAoBD,QAAiBH,MAAU,EAEhE,SAASK,EAAcC,EAAUN,GAC/B,OAAO,IAAIO,SAAQ,CAACC,EAASC,KAC3B,MAAMC,EAAgBC,KAAKC,SAAW,GACtCC,YAAW,KACLH,GACFF,EAAQ,CAAEV,SAAUQ,EAAUN,MAAOA,IACrCZ,MAEAqB,EAAO,CAAEX,SAAUQ,EAAUN,MAAOA,IACpCX,I,GAEDH,EAAM,G,CA2BQI,EAAKC,SAASuB,iBAAiB,UAvBnCC,IACfA,EAAMC,iBAEN,MAAMzB,SAAEA,EAAQG,WAAEA,EAAUC,UAAEA,EAASC,YAAEA,GAAgBN,EACzDJ,EAAQ+B,OAAOvB,EAAWwB,OAC1BjC,EAAYgC,OAAOtB,EAAUuB,OAC7BnC,EAASkC,OAAOrB,EAAYsB,OAC5B,IAAK,IAAIC,EAAI,EAAGA,GAAKpC,EAAQoC,IAC3Bd,EAAcrB,EAAUE,GAAOkC,KAAKvB,GAAUwB,MAAMnB,GACpDhB,GAASD,EACTD,IACAG,GAAOF,EAET4B,YAAW,KACThC,EAAOyC,KACL,oBAAClC,cAAiCC,WAA+B,CAE1CkC,QAAS,KAEZ,GACApC,GACHI,EAASiC,OAAO","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\nconst { Notify } = Notiflix;\nlet amount = 0;\nlet position = 1;\nlet stepdelay = 0;\nlet firsD = 0;\nlet end = 400;\nlet counterTrue = 0;\nlet counterFalse = 0;\nconst refs = {\n  dataform: document.querySelector('.form'),\n  inputDelay: document.querySelector('input[name=\"delay\"]'),\n  inputStep: document.querySelector('input[name=\"step\"]'),\n  inputAmount: document.querySelector('input[name=\"amount\"]'),\n};\n\nconst onSucses = ({ position, delay }) => {\n  Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`);\n};\nconst onError = ({ position, delay }) => {\n  Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`);\n};\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve({ position: position, delay: delay });\n        counterTrue++;\n      } else {\n        reject({ position: position, delay: delay });\n        counterFalse++;\n      }\n    }, firsD);\n  });\n}\n\nconst onSubmit = event => {\n  event.preventDefault();\n\n  const { dataform, inputDelay, inputStep, inputAmount } = refs;\n  firsD = Number(inputDelay.value);\n  stepdelay = Number(inputStep.value);\n  amount = Number(inputAmount.value);\n  for (let i = 1; i <= amount; i++) {\n    createPromise(position, firsD).then(onSucses).catch(onError);\n    firsD += stepdelay;\n    position++;\n    end += stepdelay;\n  }\n  setTimeout(() => {\n    Notify.info(\n      `Закончили! всего ${counterTrue} успеха и ${counterFalse} ошибок`,\n      {\n        timeout: 20000,\n      }\n    );\n  }, end);\n  dataform.reset();\n};\nrefs.dataform.addEventListener('submit', onSubmit);\n"],"names":["$eWCmQ","parcelRequire","Notify","$47d4ff9957288465$var$Notify","$parcel$interopDefault","$47d4ff9957288465$var$amount","$47d4ff9957288465$var$position","$47d4ff9957288465$var$stepdelay","$47d4ff9957288465$var$firsD","$47d4ff9957288465$var$end","$47d4ff9957288465$var$counterTrue","$47d4ff9957288465$var$counterFalse","$47d4ff9957288465$var$refs","dataform","document","querySelector","inputDelay","inputStep","inputAmount","$47d4ff9957288465$var$onSucses","position","position1","delay","success","$47d4ff9957288465$var$onError","position2","failure","$47d4ff9957288465$var$createPromise","position3","Promise","resolve","reject","shouldResolve","Math","random","setTimeout","addEventListener","event","preventDefault","Number","value","i","then","catch","info","timeout","reset"],"version":3,"file":"03-promises.843c36f5.js.map"}